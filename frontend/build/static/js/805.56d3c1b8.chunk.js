"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[805],{4103:(e,s,c)=>{c.d(s,{Z:()=>t});const t=e=>{let{price:s}=e;return Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(s)}},8805:(e,s,c)=>{c.r(s),c.d(s,{default:()=>p});var t=c(6224),a=c(8241),r=c(7689),n=c(1087),i=c(2187),l=c(4103),d=c(1909),o=c(1046),m=c(2791),u=c(5294),h=c(3402),x=c(184);const p=()=>{var e,s;const[c,p]=(0,t.j)(),[j,v]=(0,a.a)(),[N,k]=(0,m.useState)(""),[y,g]=(0,m.useState)(""),[f,b]=(0,m.useState)(!1),C=(0,r.s0)();(0,m.useEffect)((()=>{(async()=>{try{const{data:e}=await u.Z.get("/api/v1/product/braintree/token");k(null===e||void 0===e?void 0:e.clientToken)}catch(e){}})()}),[null===j||void 0===j?void 0:j.token]);return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"cart-page",children:[(0,x.jsx)("div",{className:"cart-item",children:(0,x.jsx)("div",{className:"items",children:null===c||void 0===c?void 0:c.map((e=>(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-img",children:(0,x.jsx)("img",{src:"/api/v1/product/product-photo/".concat(e._id),alt:e.name})}),(0,x.jsxs)("div",{className:"card-info",children:[(0,x.jsxs)("p",{className:"text-title",children:[" ",e.name," "]}),(0,x.jsxs)("p",{className:"text-body",children:[" ",e.description]}),(0,x.jsxs)("div",{className:"card-footer",children:[(0,x.jsxs)("span",{className:"text-title",children:[" ",(0,x.jsx)(l.Z,{price:e.price})," "]}),(0,x.jsx)(n.rU,{className:"card-button-link",children:(0,x.jsx)("div",{className:"card-button",children:(0,x.jsx)(i.tqy,{className:"cart-icon"})})})]}),(0,x.jsx)("button",{className:"remove-btn",onClick:()=>(e=>{try{let s=[...c],t=s.findIndex((s=>s._id===e));s.splice(t,1),p(s),localStorage.setItem("cart",JSON.stringify(s))}catch(s){}})(e._id),children:"remove"})]})]})})))})}),c.length>0?(0,x.jsxs)("div",{className:"cart-summary",children:[(0,x.jsx)("h3",{children:"Order summary"}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"cart-summary-info",children:[(0,x.jsxs)("p",{children:["total products: ",c.length," "]}),(0,x.jsxs)("p",{children:["total price: ",(()=>{try{let e=0;return null===c||void 0===c||c.map((s=>{const c=parseFloat(s.price);return e+=c})),(0,x.jsx)(l.Z,{price:e})}catch(e){}})()]})]}),null!==j&&void 0!==j&&null!==(e=j.user)&&void 0!==e&&e.address?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"user-address",children:[(0,x.jsxs)("h4",{children:["Address: ",null===j||void 0===j||null===(s=j.user)||void 0===s?void 0:s.address]}),(0,x.jsx)("div",{className:"address"}),(0,x.jsxs)("button",{className:"change-address-btn",onClick:()=>C("/profile/user/userprofile"),children:[(0,x.jsx)(d.zmo,{className:"edit"}),"Change Address"]})]}),(0,x.jsx)("div",{className:"drp-in",children:N&&c.length?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.Z,{options:{authorization:N,paypal:{flow:"vault"}},onInstance:e=>g(e)}),(0,x.jsx)("button",{className:"checkout-btn",onClick:async()=>{try{b(!0);const{nonce:e}=await y.requestPaymentMethod(),{data:s}=await u.Z.post("/api/v1/product/braintree/payment",{nonce:e,cart:c});b(!1),localStorage.removeItem("cart"),p([]),C("/profile/user/orders"),h.ZP.success("Payment Complete Successfully")}catch(e){b(!1)}},children:f?"Processing...":"Make Payment"})]}):""})]}):(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"check-user",children:null!==j&&void 0!==j&&j.token?(0,x.jsx)("button",{className:"checkout-btn",onClick:()=>C("/profile/user/userprofile"),children:"checkout"}):(0,x.jsxs)("button",{className:"checkout-btn",onClick:()=>C("/login",{state:"/cart"}),children:[(0,x.jsx)(d.Vqb,{className:"checkout-icon"}),"Login to Checkout"]})})})]}):"Your cart is empty"]})})}}}]);
//# sourceMappingURL=805.56d3c1b8.chunk.js.map